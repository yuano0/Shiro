import{r as e,j as c}from"./index-qegmBwH1.js";import{u as T}from"./image-sZM8elMx.js";import{a as d}from"./helper-0r91fNX5.js";import{a as j,u as A,F as E,b as C}from"./WrappedElementProvider-5243oAX6.js";import{t as G}from"./lodash-Y39_oLIE.js";const k="_root_1ug9l_1",M="_indicator_1ug9l_2",O="_container_1ug9l_7",W="_child_1ug9l_17",h={root:k,indicator:M,container:O,child:W},R=60,$=15,L=5e3,H=o=>{const{images:s}=o,[r,_]=e.useState(null),[,m]=e.useState({}),l=e.useRef(0);e.useEffect(()=>{if(!r)return;const t=new ResizeObserver(()=>{m({}),n(r)});function n(I){const y=I.children.item(0);y&&(l.current=y.clientWidth)}return n(r),t.observe(r),()=>{t.disconnect()}},[r]);const[f,b]=e.useState(0),N=e.useCallback(G(t=>{const n=t.target,I=Math.floor((n.scrollLeft+R+15)/l.current);b(I)},60),[]),v=e.useCallback(t=>{r&&r.scrollTo({left:l.current*t,behavior:"smooth"})},[r]),a=e.useRef(null),p=C(f),g=C(s.length),i=e.useRef(!0),x=e.useRef(!0),u=e.useCallback(()=>{x.current&&(x.current=!1,clearInterval(a.current))},[]),{ref:S}=T({initialInView:!1,triggerOnce:s.length<2,onChange(t){g.current<2||!x.current||(t?a.current=setInterval(()=>{p.current+1>g.current-1&&i.current&&(i.current=!1),p.current-1<0&&!i.current&&(i.current=!0);const n=p.current+(i.current?1:-1);v(n)},L):a.current=clearInterval(a.current))}});return e.useEffect(()=>()=>{clearInterval(a.current)},[]),c.jsxs("div",{className:d("w-full","relative",h.root),ref:S,onTouchMove:u,onWheel:u,children:[c.jsx("div",{className:d("w-full overflow-auto whitespace-nowrap",h.container),onTouchStart:u,onScroll:N,ref:_,onTouchMove:u,onWheel:u,children:s.map(t=>c.jsx(w,{image:t},t.url))}),c.jsx("div",{className:d(h.indicator,"space-x-2"),children:Array.from({length:s.length}).map((t,n)=>c.jsx("div",{className:d("h-[6px] w-[6px] cursor-pointer rounded-full bg-stone-600 opacity-50 transition-opacity duration-200 ease-in-out",f==n&&"!opacity-100"),onClick:v.bind(null,n)},n))})]})},F={width:`calc(100% - ${R}px)`,marginRight:`${$}px`},w=e.memo(({image:o})=>{const s=j(o.url),r=o.name,m=o.footnote||(["!","ยก"].some(f=>f==r?.[0])?r?.slice(1):"")||"",{w:l}=A();return c.jsx("div",{style:F,className:d(h.child,"inline-block self-center"),children:c.jsx(E,{accent:s?.accent,src:o.url,alt:m,containerWidth:l-R})},`${o.url}-${o.name||""}`)});w.displayName="GalleryItem";export{H as G};
